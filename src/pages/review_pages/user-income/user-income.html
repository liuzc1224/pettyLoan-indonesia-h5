<common-header
    [centerTxt]='"review.steps.income" | translate'
    [leftFn]='back'
    [parent]='parent'
    ></common-header>

<ion-content>
    <div class="c-flex-column-start">

        <div class="spinner_tip" *ngIf = '!resMark'>
        </div>

        <div *ngIf = 'resMark'>
            <div class="c-flex-row-allStart" style="padding: .569444rem .569444rem 0">
                <ion-icon name="information-circle" class="cpf_icon"></ion-icon>
                <span class="cpf_content">
                {{ "review.income.title" | translate }}
            </span>
            </div>

            <form [formGroup]="validForm" class="c-form-wrap" style="margin-top: .722222rem">

                <!-- 社会身份 -->
                <div class="c-input-group">
                    <div class="c-input-title c-required">
                        {{ "review.income.input.socialIdentityCode" | translate }}
                    </div>

                    <div style="position: relative;height: 1.388889rem;">
                        <ion-select
                                formControlName='socialIdentityCode'
                                class="c-form-input"
                                style="line-height: calc(1.277778rem - 22px)"
                                [cancelText]='"oper.cancel" | translate'
                                [okText]='"oper.sure" | translate'
                                [placeholder] = ' "oper.chose" | translate '
                                (click) = 'makeRecord("socialIdentity")'
                        >
                            <ion-option *ngFor='let item of enum_socialRole' [value]='item.value'>
                                {{ item.name }}
                            </ion-option>
                        </ion-select>

                        <div style="opacity: 0 ;z-index:99;margin-bottom: .416667rem;position: absolute;top:0px;left:0px;width: 100% ; height: 100%"
                             (click)="showModel('enum_socialRole' , 'socialIdentityCode', 'socialIdentity')">
                            <input
                                    type="text"
                                    class="c-input-item userInfo_section_gap"
                                    [placeholder] = ' "oper.chose" | translate '
                                    id = 'socialIdentityCode'
                                    readonly="true"
                            >
                            <ion-icon ios="md-arrow-dropdown" md="md-arrow-dropdown" class="userInfo_icon"></ion-icon>
                        </div>
                    </div>

                </div>

                <!-- 月收入 -->
                <div class="c-input-group">
                    <div class="c-input-title c-required">
                        {{ "review.income.input.monthlyIncome" | translate }}
                    </div>

                    <div style="position: relative;height: 1.388889rem;">
                        <ion-select
                                formControlName='monthlyIncome'
                                class="c-form-input userInfo_section_gap"
                                style="line-height: calc(1.277778rem - 22px)"
                                [cancelText]='"oper.cancel" | translate'
                                [okText]='"oper.sure" | translate'
                                [placeholder] = ' "oper.chose" | translate '
                                (click)= 'makeRecord("monthlyIncome")'
                        >
                            <ion-option *ngFor='let item of enum_income' [value]='item.value'>
                                {{ item.name }}
                            </ion-option>
                        </ion-select>

                        <div style="opacity: 0 ;z-index:99;position: absolute;top:0px;left:0px;width: 100% ; height: 100%"
                             (click)="showModel('enum_income' , 'monthlyIncome', 'monthlyIncome')">
                            <input
                                    type="text"
                                    class="c-input-item userInfo_section_gap"
                                    [placeholder] = ' "oper.chose" | translate '
                                    id = 'monthlyIncome'
                                    readonly="true"
                            >
                            <ion-icon ios="md-arrow-dropdown" md="md-arrow-dropdown" class="userInfo_icon"></ion-icon>
                        </div>
                    </div>

                    <!--<div style="position: relative;" (click)="showModel('enum_incomeType' , 'payrollPaymentTypeCode')">-->
                    <!--<input-->
                    <!--type="text"-->
                    <!--class="c-input-item userInfo_section_gap"-->
                    <!--[placeholder] = ' "oper.chose" | translate '-->
                    <!--id = 'payrollPaymentTypeCode'-->
                    <!--readonly="true"-->
                    <!--&gt;-->
                    <!--<ion-icon ios="md-arrow-dropdown" md="md-arrow-dropdown" class="userInfo_icon"></ion-icon>-->
                    <!--</div>-->

                    <!--<ion-select-->
                    <!--formControlName='payrollPaymentTypeCode'-->
                    <!--class="c-form-input userInfo_section_gap"-->
                    <!--style="line-height: calc(1.277778rem - 22px)"-->
                    <!--[cancelText]='"oper.cancel" | translate'-->
                    <!--[okText]='"oper.sure" | translate'-->
                    <!--[placeholder] = ' "oper.chose" | translate '-->
                    <!--&gt;-->
                    <!--<ion-option *ngFor='let item of enum_incomeType' [value]='item.value'>-->
                    <!--{{ item.name }}-->
                    <!--</ion-option>-->
                    <!--</ion-select>-->
                </div>

                <!-- 公司名称 -->
                <div class="c-input-group">
                    <div class="c-input-title c-required">
                        {{ "review.income.input.companyName" | translate }}
                    </div>
                    <input
                            type="text"
                            class="c-input-item userInfo_section_gap"
                            [placeholder] = ' "oper.input" | translate '
                            formControlName = 'companyName'
                            style="margin-top: .416667rem"
                            (focus)= 'makeRecord("companyName")'
                    >
                </div>

                <!-- 公司地址 -->
                <div class="c-input-group">
                    <div class="c-input-title c-required">
                        {{ "review.income.input.companyadress" | translate }}
                    </div>
                    <input
                        type="text"
                        class="c-input-item userInfo_section_gap"
                        [placeholder] = ' "review.baicInfo.placeHolder.street" | translate '
                        formControlName = 'street'
                        (focus)="makeRecord('street')"
                    >
    
                    <input
                        type="text"
                        class="c-input-item"
                        [placeholder] = ' "review.baicInfo.placeHolder.block" | translate '
                        formControlName = 'block'
                        style="margin-bottom: .416667rem;"
                        (focus)="makeRecord('block')"
                    >
    
                    <input
                        type="text"
                        class="c-input-item"
                        [placeholder] = ' "review.baicInfo.placeHolder.regent" | translate '
                        formControlName = 'regent'
                        style="margin-bottom: .416667rem;"
                        (focus)="makeRecord('regent')"
                    >
    
                    <input
                        type="text"
                        class="c-input-item"
                        [placeholder] = ' "review.baicInfo.placeHolder.city" | translate '
                        formControlName = 'city'
                        style="margin-bottom: .416667rem;margin-top: .416667rem;"
                        (focus)="makeRecord('city')"
                    >
    
                    <div style="position: relative;height: 1.388889rem;">
                        <ion-select
                            formControlName='provinceCode'
                            class="c-form-input userInfo_section_gap"
                            style="line-height: calc(1.277778rem - 22px)"
                            [cancelText]='"oper.cancel" | translate'
                            [okText]='"oper.sure" | translate'
                            [placeholder] = ' "oper.chose" | translate '
                            (click)="makeRecord('provinceCode')"
                        >
                            <ion-option *ngFor='let item of enum_provinceCode' [value]='item.value'>
                                {{ item.name }}
                            </ion-option>
                        </ion-select>
    
                        <div style="opacity: 0 ;z-index:99;position: absolute;top:0px;left:0px;width: 100% ; height: 100%"
                             (click)="showModel('enum_provinceCode' , 'provinceCode')">
                            <input
                                type="text"
                                class="c-input-item userInfo_section_gap"
                                [placeholder] = ' "oper.chose" | translate '
                                id = 'provinceCode'
                                readonly="true"
                            >
                            <ion-icon ios="md-arrow-dropdown" md="md-arrow-dropdown" class="userInfo_icon"></ion-icon>
                        </div>
                    </div>
                </div>

                <!-- 公司电话 -->
                <div class="c-input-group">
                    <div class="c-input-title c-required">
                        {{ "review.income.input.telphone" | translate }}
                    </div>
                    <input
                        type="text"
                        class="c-input-item userInfo_section_gap"
                        [placeholder] = ' "oper.input" | translate '
                        formControlName = 'telphone'
                        style="margin-top: .416667rem"
                        (focus)= 'makeRecord("telphone")'
                    >
                </div>

                <div class="c-input-group">
                    <div [class]="incomeFlag ? 'c-input-title c-required' : 'c-input-title'" style="margin-bottom: .263889rem">
                        {{ "review.income.input.incomeProof.title" | translate }}
                    </div>
                    <!-- <div class="income_small">
                        {{ "review.income.input.incomeProof.explain" | translate }}
                    </div> -->

                    <div class="income_proof"
                         (click) ='takeCam("incomeProof")'
                         [ngClass] = '{"incomCam_ico" : postData.get("incomeProof") == null && imgLoads.incomeProof.hasOwn == false }'
                    >
                        <ion-spinner
                                item-start=""
                                name="bubbles"
                                class="spinner spinner-ios spinner-bubbles spinner-ios-bubbles img_load_shadow"
                                [hidden] = 'imgLoads.incomeProof.hasOwn == false || imgLoads.incomeProof.hasOwn == true && imgLoads.incomeProof.loadComplete == true '
                                style="top: 60%;"
                        >
                        </ion-spinner>
                        <img
                                [src] = 'incomeProof'
                                alt=""
                                [hidden]="imgLoads.incomeProof.hasOwn != false  && imgLoads.incomeProof.loadComplete != true "
                                (load)="imgLoadComplete()"
                                style="display: block;max-height: 2.5rem;"
                        >
                    </div>
                </div>
            </form>
            <div class="preview_btnWrap" >
                <button class="c-color-blue button" (click) = 'nextBtn($event)' [disabled]='!validForm.valid || (validForm.value.isFirst &&  !postData.get("incomeProof") && incomeFlag) ' >
                    {{ "oper.next"  | translate}}
                </button>
            </div>
        </div>
    </div>
</ion-content>